<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><title>SSH密匙对生成方法汇总</title><meta name="author" content="LazyZhu"/><meta name="keywords" content="linux,publickey,putty,xshell,windows"/><meta name="description" content="这里图文方式列举了生成SSH密匙对id_rsa.pub和id_rsa(authentication key)的几种方法，包括在Windows和Linux。"/><link rel="stylesheet" type="text/css" href="/assets/css/main.css"/><link rel="stylesheet" type="text/css" href="/assets/css/pygments.css"/></head><body><div class="container"><div class="header"><div id="siteName"> L<u>azy</u>Z<u>hu's</u> H<u>ome</u> <b><font color="red">★The Diaoyu Islands belong to China!★</font></b></div><ul class="menu main"><li class="menu_item"> <a href="/">Home</a></li><li class="menu_item"> <a href="/projects.html">Projects</a></li><li class="menu_item"> <a href="/wiki.html">Wiki</a></li><li class="menu_item"> <a href="/about.html">About</a></li></ul></div><div class="sidebar"><div><center><form id="cse" id="searchbox_005189583365303993202:tnnrmg1lhbi" action="/SearchResults.html"> <input value="005189583365303993202:dwmyxdrq_ny" name="cx" type="hidden"/> <input value="FORID:11" name="cof" type="hidden"/> <input id="q" style="width:110px" name="q" size="75" /> <input value="Search" name="sa" type="submit"/></form></center><h4>分类</h4><ul><li> <a href="/categories.html#Linux"> <b><font color="blue">Linux</font></b> </a> <sup>[3]</sup></li><li> <a href="/categories.html#Nginx"> Nginx </a> <sup>[3]</sup></li><li> <a href="/categories.html#Life"> Life </a> <sup>[1]</sup></li></ul><hr/><h4>标签</h4><ul><li> <a href="/tags.html#script"> script </a> <sup>[2]</sup></li><li> <a href="/tags.html#compile"> compile </a> <sup>[2]</sup></li><li> <a href="/tags.html#xshell"> <b><font color="blue">xshell</font></b> </a> <sup>[2]</sup></li><li> <a href="/tags.html#publickey"> <b><font color="blue">publickey</font></b> </a> <sup>[1]</sup></li><li> <a href="/tags.html#linux"> <b><font color="blue">linux</font></b> </a> <sup>[3]</sup></li><li> <a href="/tags.html#blog"> blog </a> <sup>[1]</sup></li><li> <a href="/tags.html#module"> module </a> <sup>[2]</sup></li><li> <a href="/tags.html#centos"> centos </a> <sup>[1]</sup></li><li> <a href="/tags.html#windows"> <b><font color="blue">windows</font></b> </a> <sup>[1]</sup></li><li> <a href="/tags.html#nginx"> nginx </a> <sup>[3]</sup></li><li> <a href="/tags.html#memcached"> memcached </a> <sup>[1]</sup></li><li> <a href="/tags.html#static"> static </a> <sup>[1]</sup></li><li> <a href="/tags.html#shell"> shell </a> <sup>[1]</sup></li><li> <a href="/tags.html#ssh"> ssh </a> <sup>[1]</sup></li><li> <a href="/tags.html#gzip"> gzip </a> <sup>[1]</sup></li><li> <a href="/tags.html#redis"> redis </a> <sup>[1]</sup></li><li> <a href="/tags.html#lnmp"> lnmp </a> <sup>[2]</sup></li><li> <a href="/tags.html#automate"> automate </a> <sup>[2]</sup></li><li> <a href="/tags.html#putty"> <b><font color="blue">putty</font></b> </a> <sup>[2]</sup></li><li> <a href="/tags.html#kickstart"> kickstart </a> <sup>[1]</sup></li><li> <a href="/tags.html#life"> life </a> <sup>[1]</sup></li></ul><hr/><h4>归档</h4><ul><li><b><font color="blue"><a href="/archive.html#2012">2012</a></font></b></li></ul></div></div><div class="content"><div class="tags"> 分类: /<a class="category" href="/categories.html#Linux">Linux</a>/ - 标签: <span class="tag"><a href="/tags.html#linux">linux</a></span> <span class="tag"><a href="/tags.html#publickey">publickey</a></span> <span class="tag"><a href="/tags.html#putty">putty</a></span> <span class="tag"><a href="/tags.html#xshell">xshell</a></span> <span class="tag"><a href="/tags.html#windows">windows</a></span> - 日期: 2012.09.05</div><br/><h1>SSH密匙对生成方法汇总</h1><p>随着密码泄露事件的频发，为了减少服务器安全隐患，有必要更改传统的密码登陆方式，而采用SSH密匙对。SSH密匙对比密码要安全得多，简便得多，而且Windows下的SSH客户端都支持密匙对登录方式，何乐而不为呢？</p><p>SSH 密匙对其实是OpenSSH密匙对，成对的且是唯一的，分为公匙(public key)和私匙(private key)。公匙(public key)置于服务器，私匙(private key)置于本地，以此达到相互验证的目的。其实生成SSH密匙对并不复杂，而且密匙对不用每次都生成。生成后一对后可以一直使用，甚至可以达到一键配置密匙对，以后会介绍。</p><p>目前已有多种简单方法可用来生成密匙对：<code>Windows的Xshell</code>、<code>Linux的ssh-keygen</code>以及<code>Windows的puttygen</code>。</p><br/><h2>1. Windows的Xshell</h2><p>Xshell是一个Windows下的ssh客户端，因为支持多标签，且对个人用户免费，所以国内也有很多人用，<a href="http://www.netsarang.com/download/down_xsh.html" title="Xshell">去下载</a>。</p><p>安装完成后，打开菜单栏<code>Tools</code>下的<code>User Key Generation Wizard</code>，然后按图示一步步做。</p><p><img src="/images/2012/2012-09-05_Xshell01.png" alt="Xshell"/></p><p><img src="/images/2012/2012-09-05_Xshell02.png" alt="Xshell"/></p><p><img src="/images/2012/2012-09-05_Xshell03.png" alt="Xshell"/></p><p><img src="/images/2012/2012-09-05_Xshell04.png" alt="Xshell"/></p><p><img src="/images/2012/2012-09-05_Xshell05.png" alt="Xshell"/></p><p>最终会得到两个文件：<code>id_rsa.pub</code>和<code>id_rsa</code>。这两个文件就是密匙对，id_rsa.pub为公匙(public key)，而id_rsa为私匙(private key)，下同。</p><p>对于使用PuTTY的用户，必须使用puttygen转换，详见<code>PuTTY专用私匙</code>。</p><br/><h2>2. Linux的ssh-keygen</h2><p>Linux生成密匙对最简单，以<code>root</code>登录，运行：</p><div class="highlight"><pre><code class="bash">ssh-keygen -b 1024 -t rsa
</code></pre></div><p>一直按<code>回车</code>到结束：</p><div class="highlight"><pre><code class="bash">Generating public/private rsa key pair.
Enter file in which to save the key <span class="o">(</span>/root/.ssh/id_rsa<span class="o">)</span>: <span class="c"># 密匙对存放位置，回车即可.</span>
Enter passphrase <span class="o">(</span>empty <span class="k">for </span>no passphrase<span class="o">)</span>: <span class="c"># 回车</span>
Enter same passphrase again: <span class="c"># 回车</span>
Your identification has been saved in /root/.ssh/id_rsa.
Your public key has been saved in /root/.ssh/id_rsa.pub.
The key fingerprint is:
6a:56:fd:f5:2a:b3:42:98:f7:65:c3:e0:ec:0f:23:4b
</code></pre></div><p>在Linux目录<code>/root/.ssh/</code>下就会生成<code>id_rsa.pub</code>和<code>id_rsa</code>密匙对。</p><div class="highlight"><pre><code class="bash">ls /root/.ssh/
id_rsa  id_rsa.pub
</code></pre></div><p>用<a href="http://winscp.net/eng/download.php" title="WinSCP">WinSCP</a>或者其他工具从Linux上下载到本地即可。</p><p>对于使用PuTTY的用户，必须使用puttygen转换，详见<code>PuTTY专用私匙</code>。</p><br/><h2>3. Windows的puttygen</h2><p>打开puttygen，点击<code>Generate</code>，然后按图示一步步做即可。</p><p><img src="/images/2012/2012-09-05_PuTTY01.png" alt="PuTTY"/></p><p><img src="/images/2012/2012-09-05_PuTTY02.png" alt="PuTTY"/></p><p><img src="/images/2012/2012-09-05_PuTTY03.png" alt="PuTTY"/></p><p><img src="/images/2012/2012-09-05_PuTTY04.png" alt="PuTTY"/></p><p>得到密匙对：<code>id_rsa.pub</code>和<code>id_rsa</code>。</p><br/><h2>4. PuTTY专用私匙</h2><p>对于使用PuTTY的用户来说有了<code>id_rsa.pub</code>和<code>id_rsa</code>还不行，因为PuTTY的密匙的格式与OpenSSH密匙的不同。PuTTY无法识别<code>id_rsa</code>，所以无法直接使用，需用puttygen转换成PuTTY专用的私匙，下载<a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html" title="puttygen">puttygen</a>。</p><p>打开puttygen，打开菜单栏<code>File</code>下的<code>Load private key</code>，文档类型选择<code>All Files</code>，文件选<code>id_rsa</code>，如图一步步做。</p><p><img src="/images/2012/2012-09-05_PuTTY05.png" alt="PuTTY"/></p><p><img src="/images/2012/2012-09-05_PuTTY06.png" alt="PuTTY"/></p><p><img src="/images/2012/2012-09-05_PuTTY07.png" alt="PuTTY"/></p><p><code>PuTTY.ppk</code>在PuTTY中配置后，可实现免密码自动登陆服务器的SSH。当然，这是后话了。</p><p>生成的密匙对可以使用不同的服务器上，不用每次都生成。</p><br/><h2>可能感兴趣的文章：</h2><ul><li><a href="/Linux/Setup-server-ssh-keys-and-safe-login-for-authentication.html">配置并使用SSH密匙对自动登录服务器</a></li><li><a href="/Linux/Automated-and-quick-install-centos-5-with-kickstart.html">使用Kickstart全自动化安装CentOS 5.x系统</a></li></ul><div class="ds-thread" data-thread-key="" data-title="" data-author-key="" data-url=""></div> <script>var duoshuoQuery={short_name:"lazyzhu"};(function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="http://static.duoshuo.com/embed.js",e.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script></div></div><div class="footer"> © 2012 <a href="/about.html">LazyZhu</a> All Rights Reserved. Powered by <a rel="Hostshare" href="http://my.hostshare.cn/cart.php">Hostshare</a> & <a rel="Github" href="http://pages.github.com">Github</a>.</div></body> <!--[if !IE]><!--> <script src="/assets/js/main.js"></script><!--<![endif]--></html>